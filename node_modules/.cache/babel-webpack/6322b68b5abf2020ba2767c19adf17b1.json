{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/ecom.services\";\nimport * as i2 from \"../components.service\";\nimport * as i3 from \"src/app/shared/shared.services\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../sidebar/sidebar.component\";\nimport * as i7 from \"ngx-pagination\";\nimport * as i8 from \"@ngx-translate/core\";\n\nfunction ProductLayoutComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"/\", ctx_r0.productCategory, \"\");\n  }\n}\n\nfunction ProductLayoutComponent_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"/\", item_r5, \"\");\n  }\n}\n\nfunction ProductLayoutComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelementStart(1, \"p\", 21);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" \\u00A0\\u00A0 \");\n    i0.ɵɵelementStart(4, \"span\", 22);\n    i0.ɵɵelementStart(5, \"a\", 23);\n    i0.ɵɵlistener(\"click\", function ProductLayoutComponent_div_9_Template_a_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const i_r7 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.onFashionDelete(i_r7);\n    });\n    i0.ɵɵelement(6, \"i\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u00A0\", item_r6, \"\");\n  }\n}\n\nfunction ProductLayoutComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelementStart(1, \"p\", 21);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" \\u00A0\\u00A0 \");\n    i0.ɵɵelementStart(4, \"span\", 22);\n    i0.ɵɵelementStart(5, \"a\", 23);\n    i0.ɵɵlistener(\"click\", function ProductLayoutComponent_div_10_Template_a_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const i_r11 = restoredCtx.index;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.onBrandDelete(i_r11);\n    });\n    i0.ɵɵelement(6, \"i\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u00A0\", item_r10, \"\");\n  }\n}\n\nfunction ProductLayoutComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵlistener(\"click\", function ProductLayoutComponent_div_28_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const i_r15 = restoredCtx.index;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.onProduct(i_r15);\n    });\n    i0.ɵɵelement(1, \"img\", 27);\n    i0.ɵɵelementStart(2, \"div\", 28);\n    i0.ɵɵelementStart(3, \"p\", 29);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵelementStart(7, \"span\", 30);\n    i0.ɵɵtext(8, \"Brand\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 31);\n    i0.ɵɵelementStart(11, \"div\", 32);\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵelementStart(13, \"span\", 30);\n    i0.ɵɵtext(14, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", item_r14.images[0], i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r14.product_name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\":\", item_r14.brand, \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\":\", i0.ɵɵpipeBind1(16, 4, item_r14.price), \" \");\n  }\n}\n\nconst _c0 = function (a1) {\n  return {\n    itemsPerPage: 30,\n    currentPage: a1\n  };\n};\n\nexport let ProductLayoutComponent = /*#__PURE__*/(() => {\n  class ProductLayoutComponent {\n    constructor(ecomService, compService, shared, route) {\n      this.ecomService = ecomService;\n      this.compService = compService;\n      this.shared = shared;\n      this.route = route;\n      this.p = 1;\n      this.emptyArray = false;\n    }\n\n    onProduct(i) {\n      this.shared.clickedProduct = i;\n      localStorage.setItem('clickedProduct', JSON.stringify(this.productsArray[i]));\n      this.route.navigate(['/product', `${this.productsArray[i].product_id}`]);\n    }\n\n    onFashionDelete(i) {\n      console.log(this.subCategory);\n      this.subCategory.splice(i, 1);\n      this.compService.fashionCategory.next(this.subCategory);\n    }\n\n    onBrandDelete(i) {\n      this.brandCategory.splice(i, 1);\n      this.compService.brandsCategory.next(this.brandCategory);\n    }\n\n    ngOnChanges() {\n      if (this.productsArray == '') {\n        this.emptyArray = true;\n      } else {\n        this.emptyArray = false;\n      }\n    }\n\n    searchFilter(searchValue) {\n      let filterData = this.productsArray.filter(data => {\n        return data.brand.toLowerCase().includes(searchValue);\n      });\n      this.productsArray = filterData;\n    }\n\n    onSort(order) {\n      let sorted;\n\n      if (order == 1) {\n        sorted = this.productsArray.sort((a, b) => {\n          return a.price - b.price;\n        });\n      } else if (order == 0) {\n        sorted = this.productsArray.sort((a, b) => {\n          return b.price - a.price;\n        });\n      }\n\n      this.productsArray = sorted;\n    }\n\n    ngOnInit() {\n      this.productCategory = this.ecomService.cate;\n      this.compService.fashionCategory.subscribe(cat => {\n        this.subCategory = cat;\n      });\n      this.compService.brandsCategory.subscribe(cat => {\n        this.brandCategory = cat;\n      });\n      this.ecomService.category.subscribe(res => {\n        this.p = 1;\n\n        if (res) {\n          this.productCategory = res;\n        }\n\n        let subCategory;\n\n        if (this.productCategory) {\n          this.ecomService.categoryProducts(this.productCategory).subscribe({\n            next: res => {\n              this.p = 1;\n              console.log(res);\n              this.productsArray = res;\n              this.searchProduct = res;\n              this.displayedProductsArray = this.productsArray;\n            }\n          });\n        }\n\n        this.compService.fashionCategory.subscribe(cat => {\n          this.fashionFilterChange(this.productCategory, cat);\n          subCategory = cat;\n\n          if (cat.length < 1) {\n            this.ecomService.categoryProducts(this.productCategory).subscribe(res => {\n              this.p = 1;\n              this.productsArray = res;\n            });\n          }\n\n          this.compService.brandsCategory.subscribe(brandcat => {\n            this.brandChange(this.productCategory, cat, brandcat);\n\n            if (brandcat.length < 1) {\n              this.ecomService.categoryProducts(this.productCategory).subscribe(res => {\n                this.p = 1;\n                this.productsArray = res;\n              });\n              this.emptyArray = false;\n            }\n          });\n        });\n        this.compService.fashionCategory.subscribe(cat => {\n          this.compService.priceRange.subscribe(res => {\n            this.priceRange(res);\n\n            if (res.length < 1 && this.subCategory.length > 0) {\n              this.fashionFilterChange(this.productCategory, cat);\n            } else if (res.length < 1 && this.productCategory) {\n              this.ecomService.categoryProducts(this.productCategory).subscribe(res => {\n                this.p = 1;\n                this.productsArray = res;\n              });\n            }\n          });\n        });\n      });\n      this.compService.searchValue.subscribe(res => {\n        this.searchFilter(res);\n      });\n    }\n\n    priceRange(range) {\n      let pricRangeArray = [];\n\n      for (let i = 0; i < range.length; i++) {\n        switch (range[i]) {\n          case '0-500':\n            {\n              this.displayedProductsArray.map(products => {\n                if (products.price <= 500) {\n                  pricRangeArray.push(products);\n                }\n              });\n            }\n            break;\n\n          case '500-1000':\n            {\n              this.displayedProductsArray.map(products => {\n                if (products.price > 500 && products.price <= 1000) {\n                  pricRangeArray.push(products);\n                }\n              });\n            }\n            break;\n\n          case '1000-2000':\n            {\n              this.displayedProductsArray.map(products => {\n                if (products.price > 1000 && products.price <= 2000) {\n                  pricRangeArray.push(products);\n                }\n              });\n            }\n            break;\n\n          case '2000-5000':\n            {\n              this.displayedProductsArray.map(products => {\n                if (products.price > 2000 && products.price <= 5000) {\n                  pricRangeArray.push(products);\n                }\n              });\n            }\n            break;\n\n          case '5000+':\n            {\n              this.displayedProductsArray.map(products => {\n                if (products.price > 5000) {\n                  pricRangeArray.push(products);\n                }\n              });\n            }\n        }\n\n        this.productsArray = pricRangeArray;\n      }\n    }\n\n    brandChange(mainCategory, fashionCategory, brand) {\n      let brands = [];\n      this.productsArray = [];\n\n      for (let i = 0; i < fashionCategory.length; i++) {\n        brands = [];\n\n        for (let j = 0; j < brand.length; j++) {\n          this.ecomService.brandCategory(mainCategory, fashionCategory[i], brand[j]).subscribe(res => {\n            this.p = 1;\n            brands.push(...res);\n            this.productsArray = brands;\n\n            if (this.productsArray == '') {\n              this.emptyArray = true;\n            } else {\n              this.emptyArray = false;\n            }\n          });\n        }\n      }\n    }\n\n    fashionFilterChange(mainCategory, subCategory) {\n      let fashionFilter = [];\n\n      for (let i = 0; i < subCategory.length; i++) {\n        this.ecomService.fashionCategory(mainCategory, subCategory[i]).subscribe(res => {\n          this.p = 1;\n          fashionFilter.push(...res);\n        });\n      }\n\n      this.productsArray = fashionFilter;\n    }\n\n  }\n\n  ProductLayoutComponent.ɵfac = function ProductLayoutComponent_Factory(t) {\n    return new (t || ProductLayoutComponent)(i0.ɵɵdirectiveInject(i1.EcomServices), i0.ɵɵdirectiveInject(i2.ComponentService), i0.ɵɵdirectiveInject(i3.SharedService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n\n  ProductLayoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductLayoutComponent,\n    selectors: [[\"app-product-layout\"]],\n    inputs: {\n      kidsCategory: \"kidsCategory\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 32,\n    vars: 19,\n    consts: [[1, \"container-fluid\"], [1, \"row\", \"p-2\"], [1, \"col-11\", \"d-flex\", \"p-1\"], [1, \"d-flex\", \"ml-5\"], [4, \"ngIf\"], [\"class\", \"d-flex\", 4, \"ngFor\", \"ngForOf\"], [1, \"ml-lg-5\", \"d-flex\", \"text-center\", \"mb-2\"], [\"class\", \"border mr-1\", \"style\", \"border-radius: 20px; height: 25px\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"border\", \"style\", \"border-radius: 20px; height: 25px\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-1\", \"p-1\"], [1, \"dropdown\"], [\"type\", \"button\", \"id\", \"dropdownMenuButton\", \"data-toggle\", \"dropdown\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", 1, \"btn\", \"btn-danger\", \"dropdown-toggle\"], [\"aria-labelledby\", \"dropdownMenuButton\", 1, \"dropdown-menu\"], [1, \"dropdown-item\", 3, \"click\"], [1, \"row\", \"justify-content-center\"], [1, \"col-2\", \"mt-3\"], [1, \"col-10\", 2, \"height\", \"830px\", \"overflow-y\", \"scroll\"], [\"class\", \"col-12 col-lg-3 col-sm-12 col-md-3 col-xl-3 card mr-5 mt-3 p-0\", \"style\", \"cursor: pointer;\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"pageChange\"], [1, \"d-flex\"], [1, \"border\", \"mr-1\", 2, \"border-radius\", \"20px\", \"height\", \"25px\"], [1, \"float-left\", \"m-auto\"], [1, \"d-inline\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"fa\", \"fa-close\"], [1, \"border\", 2, \"border-radius\", \"20px\", \"height\", \"25px\"], [1, \"col-12\", \"col-lg-3\", \"col-sm-12\", \"col-md-3\", \"col-xl-3\", \"card\", \"mr-5\", \"mt-3\", \"p-0\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"card-img-top\", 3, \"src\"], [1, \"card-body\"], [2, \"font-size\", \"12px\"], [2, \"font-size\", \"16px\", \"font-weight\", \"500\"], [1, \"card-footer\", \"d-flex\"], [2, \"margin\", \"auto\"]],\n    template: function ProductLayoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵtext(5, \"Home\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, ProductLayoutComponent_p_6_Template, 2, 1, \"p\", 4);\n        i0.ɵɵtemplate(7, ProductLayoutComponent_p_7_Template, 2, 1, \"p\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 6);\n        i0.ɵɵtemplate(9, ProductLayoutComponent_div_9_Template, 8, 1, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, ProductLayoutComponent_div_10_Template, 8, 1, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 9);\n        i0.ɵɵelementStart(12, \"div\", 10);\n        i0.ɵɵelementStart(13, \"button\", 11);\n        i0.ɵɵtext(14);\n        i0.ɵɵpipe(15, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 12);\n        i0.ɵɵelementStart(17, \"a\", 13);\n        i0.ɵɵlistener(\"click\", function ProductLayoutComponent_Template_a_click_17_listener() {\n          return ctx.onSort(1);\n        });\n        i0.ɵɵtext(18);\n        i0.ɵɵpipe(19, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"a\", 13);\n        i0.ɵɵlistener(\"click\", function ProductLayoutComponent_Template_a_click_20_listener() {\n          return ctx.onSort(0);\n        });\n        i0.ɵɵtext(21);\n        i0.ɵɵpipe(22, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 14);\n        i0.ɵɵelementStart(24, \"div\", 15);\n        i0.ɵɵelement(25, \"app-sidebar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 16);\n        i0.ɵɵelementStart(27, \"div\", 14);\n        i0.ɵɵtemplate(28, ProductLayoutComponent_div_28_Template, 17, 6, \"div\", 17);\n        i0.ɵɵpipe(29, \"paginate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\");\n        i0.ɵɵelementStart(31, \"pagination-controls\", 18);\n        i0.ɵɵlistener(\"pageChange\", function ProductLayoutComponent_Template_pagination_controls_pageChange_31_listener($event) {\n          return ctx.p = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.productCategory);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.subCategory);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.subCategory);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.brandCategory);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 8, \"sortby\"), \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(19, 10, \"lowtohigh\"), \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(22, 12, \"hightolow\"), \"\");\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(29, 14, ctx.productsArray, i0.ɵɵpureFunction1(17, _c0, ctx.p)));\n      }\n    },\n    directives: [i5.NgIf, i5.NgForOf, i6.SidebarComponent, i7.PaginationControlsComponent],\n    pipes: [i8.TranslatePipe, i7.PaginatePipe, i5.CurrencyPipe],\n    styles: [\".cad-footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;text-align:center}  .ngx-pagination{padding:15px;text-align:center!important}  .ngx-pagination .current{padding:8px;background-color:red!important}\"]\n  });\n  return ProductLayoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}